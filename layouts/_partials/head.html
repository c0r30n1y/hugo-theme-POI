<!-- Meta Data -->
<meta charset="utf-8">
{{ if and (eq .Section "blog") (eq .Kind "page") }}
    <title>{{ .Title }} | {{ .Section | upper }}</title>
{{ else }}
    <title>{{ .Title }} | {{ .Site.Params.title }}</title>
{{ end }}

{{ if eq .Permalink "/" }}
    <meta name="description" content="{{ .Site.Params.description }}">
{{ else }}
    <meta name="description" content="{{ .Description }}">
{{ end }}

{{ $keywords := delimit (uniq .Site.Params.keywords) ", " }}
{{ if and (eq .Section "blog") (eq .Kind "page") }}
    {{ $tags := delimit (uniq .Params.tags) ", " }}
    <meta name="keywords" content="{{ $keywords }},blog{{ if gt (len $tags) 0 }},{{ $tags }}{{ end }}">
{{ else }}
    <meta name="keywords" content="{{ $keywords }}">
{{ end }}

<meta name="author" content="{{ .Site.Params.first }} {{ .Site.Params.last }}">
<meta name="robots" content="index,follow">
<meta name="generator" content="Hugo v{{ hugo.Version }}">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#ba0000">

<!-- Open Graph Data -->
{{ if eq .Permalink "/" }}
    <meta property="og:description" content="{{ .Site.Params.description }}">
{{ else }}
    <meta property="og:description" content="{{ .Description }}">
{{ end }}

{{ if and (eq .Section "blog") (eq .Kind "page") }}
    <meta property="og:title" content="{{ .Title }} | {{ .Site.Params.blog_meta.title }}">
    <meta property="og:site_name" content="{{ .Site.Params.blog_meta.title }}">
    <meta property="og:url" content="{{ .Site.BaseURL }}{{ .Permalink }}">
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="{{ .Date | dateFormat "2006-01-02T15:04:05Z" }}">
    <meta property="article:modified_time" content="{{ if .Lastmod }}{{ .Lastmod | dateFormat "2006-01-02T15:04:05Z" }}{{ else }}{{ .Date | dateFormat "2006-01-02T15:04:05Z" }}{{ end }}">
    <meta property="article:section" content="blog">
    <meta property="og:image" content="{{ .Site.BaseURL }}/img/ogimage_blog.jpg">
    <meta property="og:image:alt" content="{{ .Site.Params.blog_meta.title }}">
{{ else }}
    <meta property="og:title" content="{{ .Title }} | {{ .Site.Params.title }}">
    <meta property="og:site_name" content="{{ .Site.Params.title }}">
    <meta property="og:url" content="{{ .Permalink }}">
    <meta property="og:type" content="website">
    <meta property="og:image" content="{{ .Site.BaseURL }}/img/ogimage.jpg">
    <meta property="og:image:alt" content="{{ .Site.Params.title }}">
{{ end }}

<meta property="og:image:width" content="1280">
<meta property="og:image:height" content="640">
<meta property="og:image:type" content="image/jpeg">
<meta property="og:locale" content="en_US">



<!-- Link Relationships 
{{ if .Site.BaseURL }}
  <base href="{{ .Site.BaseURL }}">
{{ end }} -->
<link rel="canonical" href="{{ .Site.BaseURL }}{{ .Permalink }}">
<link rel="alternate" type="application/atom+xml" href="/feed.xml" title="{{ .Site.Params.blog_meta.title }} Feed">
<link rel="me" href="https://bsky.app/profile/strappazzon.xyz">

<!-- Favicons -->
<link rel="icon" href="/favicon.ico" sizes="48x48">
<link rel="icon" type="image/svg+xml" href="/img/favicons/favicon.svg" sizes="any">
<link rel="apple-touch-icon" href="/img/favicons/favicon-180.png">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.bunny.net">
<link rel="stylesheet" href="https://fonts.bunny.net/css?family=barlow-semi-condensed:400,400i,700,700i&display=swap">
<link rel="stylesheet" href="https://fonts.bunny.net/css?family=inconsolata:400&display=swap">
<link rel="stylesheet" href="https://fonts.bunny.net/css?family=coda:400&display=swap">

<!-- Stylesheets -->
{{ $cssOpts := (dict "transpiler" "dartsass" "targetPath" "css/vendors.css"  ) }}
{{ $vendors := resources.Get "css/vendors.scss" | toCSS $cssOpts }}
{{ $cssOpts := (dict "transpiler" "dartsass" "targetPath" "css/common.css" ) }}
{{ $common := resources.Get "css/common.scss" | toCSS $cssOpts }}

<link rel="stylesheet" href="{{ $vendors.RelPermalink }}">
<link rel="stylesheet" href="{{ $common.RelPermalink }}">



{{ $layout := .Layout }}
{{ if and (eq .Section "blog") (eq .Kind "section") }}
    {{ $scssPath := "css/blog/list.scss" }}
    {{ with resources.Get $scssPath }}
    {{ $css := . | toCSS (dict "transpiler" "dartsass" "targetPath" "css/blog/list.css") }}
    <link rel="stylesheet" href="{{ $css.RelPermalink }}">
    {{ end }}
{{ else if and (eq .Section "blog") (eq .Kind "page") }}
    {{ $scssPath := "css/blog/single.scss" }}
    {{ with resources.Get $scssPath }}
    {{ $css := . | toCSS (dict "transpiler" "dartsass" "targetPath" "css/blog/single.css") }}
    <link rel="stylesheet" href="{{ $css.RelPermalink }}">
    {{ end }}
{{ else }}
    {{ $scssPath := printf "css/%s.scss" $layout }}
    {{ with resources.Get $scssPath }}
    {{ $css := . | toCSS (dict "transpiler" "dartsass" "targetPath" (printf "css/%s.css" $layout)) }}
    <link rel="stylesheet" href="{{ $css.RelPermalink }}">
    {{ end }}
{{ end }}


<!-- Scripts -->
{{ if and (eq .Section "blog") (eq .Kind "page") }}
    {{ $script1 := resources.Get "js/clipboard.js" | js.Build }}
    <script src="{{ $script1.RelPermalink }}"></script>
    {{ if not .Params.lightbox }}
        {{ $script2 := resources.Get "js/vendors/bootstrap.bundle.min.js"| js.Build  }}
        <script src="{{ $script2.RelPermalink }}"></script>
        {{ $script3 := resources.Get "js/vendors/rat.lightbox.min.js"| js.Build  }}
        <script src="{{ $script3.RelPermalink }}"></script>
        {{ $script4 := resources.Get "js/lightbox.js" | js.Build }}
        <script src="{{ $script4.RelPermalink }}"></script>
    {{ end }}
{{ end }}

{{ if and (eq .Section "blog") (eq .Kind "page") }}
    <script type="application/ld+json">
        {
            "@context": "https://schema.org/",
            "@type": "BlogPosting",
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "{{ .Site.BaseURL }}{{ .Permalink }}"
            },
            "headline": "{{ .Title }}",
            "description": "{{ .Description }}",
            "image": {
                "@type": "ImageObject",
                "url": "{{ .Site.BaseURL }}/img/ogimage_blog.jpg",
                "width": "1280",
                "height": "640"
            },
            "author": {
                "@type": "Person",
                "name": "{{ .Site.Params.title }}",
                "image": {
                    "@type": "ImageObject",
                    "url": "{{ .Site.BaseURL }}/img/avatar.png"
                },
                "url": "{{ .Site.BaseURL }}"
            },
            "datePublished": "{{ .Date | dateFormat "2006-01-02T15:04:05Z" }}",
            "dateModified": "{{ if .Lastmod }}{{ .Lastmod | dateFormat "2006-01-02T15:04:05Z" }}{{ else }}{{ .Date | dateFormat "2006-01-02T15:04:05Z" }}{{ end }}"
        }
    </script>
{{ else }}
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "author": {
            "@type": "Person",
            "name": "{{ .Site.Params.title }}",
            "image": {
                "@type": "ImageObject",
                "url": "{{ .Site.BaseURL }}/img/avatar.png"
            },
            "knowsLanguage": {
                "@type": "Language",
                "name": "English",
                "alternateName": "en"
            }
        },
        "url": "{{ .Site.BaseURL }}",
        "image": {
            "@type": "ImageObject",
            "url": "{{ .Site.BaseURL }}/img/avatar.png"
        },
        "keywords": "{{ $keywords }}",
        "description": "{{ .Description }}",
        "inLanguage": {
            "@type": "Language",
            "name": "English",
            "alternateName": "en"
        },
        "license": "https://raw.githubusercontent.com/Strappazzon/www/master/LICENSE-CODE.txt",
        "sameAs": [
            {{ range .Site.Data.accounts }} 
                "{{ .url }}"{% if not last %}, {% endif %}
            {{ end }}
        ]
    }
    </script>
{{ end }}
